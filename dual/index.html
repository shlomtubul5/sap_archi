<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SAP Dual Stack Architecture (Detailed & Corrected)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-slate-50 text-slate-800 font-sans min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-slate-900 text-white p-3 shadow-lg sticky top-0 z-50">
      <div class="max-w-[95%] mx-auto flex justify-between items-center">
        <h1 class="text-lg font-bold flex items-center gap-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 text-blue-400"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
            />
          </svg>
          SAP Dual Stack (Production View)
        </h1>
        <p class="text-xs text-slate-400 hidden sm:block">
          Detailed Component Inspector
        </p>
      </div>
    </header>

    <main class="flex-grow flex flex-col lg:flex-row w-full p-2 gap-4">
      <!-- Diagram Container -->
      <div
        class="flex-grow relative overflow-x-auto bg-white rounded-xl shadow-sm border border-slate-200 p-4 min-w-[700px]"
      >
        <!-- Clients -->
        <div class="flex justify-center gap-24 mb-6 relative z-10">
          <div
            onclick="showInfo('sapgui')"
            class="diagram-box w-32 p-2 bg-blue-100 border-2 border-blue-200 rounded text-center text-xs font-semibold shadow-sm"
          >
            SAP GUI
            <div class="sub-box mt-1 text-[9px] text-blue-600">
              DIAG Protocol
            </div>
          </div>
          <div
            onclick="showInfo('browser')"
            class="diagram-box w-32 p-2 bg-orange-100 border-2 border-orange-200 rounded text-center text-xs font-semibold shadow-sm"
          >
            Web Browser
            <div class="sub-box mt-1 text-[9px] text-orange-600">
              HTTP/HTTPS
            </div>
          </div>
        </div>

        <!-- Virtual Machine Container -->
        <div
          onclick="showInfo('vm')"
          class="vm-bg p-4 rounded-lg relative mb-8 pt-8"
        >
          <div
            class="absolute -top-3 left-4 bg-slate-500 text-white text-[10px] px-2 py-1 rounded shadow"
          >
            Virtual Machine / Host (Single Host Lab Scenario)
          </div>

          <!-- The Two Stacks Columns -->
          <div class="grid grid-cols-2 gap-6 relative">
            <!-- Vertical Divider -->
            <div
              class="absolute left-1/2 top-0 bottom-0 w-px bg-slate-300 -translate-x-1/2 hidden md:block"
            ></div>

            <!-- LEFT COLUMN: ABAP STACK -->
            <div class="flex flex-col">
              <!-- Instance 1: ASCS (ABAP Central Services) -->
              <div class="instance-box abap-bg">
                <span class="instance-label"
                  >Instance 00: ASCS (ABAP Central Services)</span
                >
                <div class="grid grid-cols-3 gap-2 mt-2">
                  <div
                    onclick="showInfo('abap_ms')"
                    class="diagram-box p-1 svc-bg border border-blue-300 rounded text-center text-[10px] font-bold"
                  >
                    Msg Server
                  </div>
                  <div
                    onclick="showInfo('abap_es')"
                    class="diagram-box p-1 svc-bg border border-blue-300 rounded text-center text-[10px] font-bold"
                  >
                    Enqueue
                  </div>
                  <div
                    onclick="showInfo('sapstartsrv')"
                    class="diagram-box p-1 infra-bg border rounded text-center"
                  >
                    <span class="text-[9px] text-slate-500">sapstartsrv</span>
                  </div>
                </div>
              </div>

              <!-- Instance 2: ABAP PAS (Primary App Server) -->
              <div class="instance-box abap-bg">
                <span class="instance-label">Instance 01: ABAP PAS</span>

                <!-- Infrastructure Row -->
                <div class="flex justify-between mb-2 mt-1">
                  <div
                    onclick="showInfo('sapstartsrv')"
                    class="diagram-box px-2 py-1 infra-bg border rounded text-[9px] text-slate-500"
                  >
                    sapstartsrv
                  </div>
                  <div
                    onclick="showInfo('igs')"
                    class="diagram-box px-2 py-1 infra-bg border rounded text-[9px] text-slate-500"
                  >
                    IGS (Optional)
                  </div>
                </div>

                <!-- ICM -->
                <div
                  onclick="showInfo('icm')"
                  class="diagram-box w-full p-1 shared-bg border-2 border-purple-200 rounded text-center shadow-sm mb-2"
                >
                  <span class="font-bold text-purple-900 text-xs">ICM</span>
                  <div class="flex gap-1 mt-1 justify-center">
                    <div class="sub-box w-12 bg-purple-50 text-[8px]">
                      Threads
                    </div>
                    <div class="sub-box w-12 bg-purple-50 text-[8px]">MPI</div>
                  </div>
                </div>

                <!-- Dispatcher -->
                <div
                  onclick="showInfo('dispatcher_abap')"
                  class="diagram-box p-2 bg-white border-2 border-blue-300 rounded text-center shadow-sm mb-2"
                >
                  <span class="font-bold text-xs">ABAP Dispatcher</span>
                  <div class="sub-box mt-1 w-full bg-blue-50 text-[9px]">
                    Request Queue
                  </div>
                </div>

                <!-- Shared Memory -->
                <div
                  onclick="showInfo('abap_mem')"
                  class="diagram-box p-1 bg-blue-50 border border-blue-200 border-dashed rounded text-center mb-2"
                >
                  <span class="text-[9px] font-bold text-blue-400 uppercase"
                    >Shared Memory</span
                  >
                  <div class="flex justify-center gap-1 mt-1">
                    <div class="sub-box text-[8px] bg-white">PXA</div>
                    <div class="sub-box text-[8px] bg-white">Roll Area</div>
                    <div class="sub-box text-[8px] bg-white">Table Buf</div>
                  </div>
                </div>

                <!-- Work Processes Grid -->
                <div class="space-y-1">
                  <span class="container-label text-[9px]">Work Processes</span>
                  <div class="grid grid-cols-2 gap-2">
                    <!-- DIA -->
                    <div
                      onclick="showInfo('wp_dia')"
                      class="diagram-box p-1 bg-white border-2 border-blue-400 rounded"
                    >
                      <div
                        class="text-[10px] font-bold text-center text-blue-800"
                      >
                        DIA (Dialog)
                      </div>
                    </div>
                    <!-- BTC -->
                    <div
                      onclick="showInfo('wp_btc')"
                      class="diagram-box p-1 bg-blue-50 border border-blue-300 rounded"
                    >
                      <div
                        class="text-[10px] font-bold text-center text-blue-700"
                      >
                        BTC (Batch)
                      </div>
                    </div>
                    <!-- UPD -->
                    <div
                      onclick="showInfo('wp_upd')"
                      class="diagram-box p-1 bg-blue-50 border border-blue-300 rounded"
                    >
                      <div
                        class="text-[10px] font-bold text-center text-blue-700"
                      >
                        UPD (V1)
                      </div>
                    </div>
                    <!-- UP2 (NEW) -->
                    <div
                      onclick="showInfo('wp_up2')"
                      class="diagram-box p-1 bg-blue-50 border border-blue-300 rounded"
                    >
                      <div
                        class="text-[10px] font-bold text-center text-blue-700"
                      >
                        UP2 (V2)
                      </div>
                    </div>
                    <!-- SPO (NEW) -->
                    <div
                      onclick="showInfo('wp_spo')"
                      class="diagram-box p-1 bg-blue-50 border border-blue-300 rounded col-span-2"
                    >
                      <div
                        class="text-[10px] font-bold text-center text-blue-700"
                      >
                        SPO (Spool)
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Gateway -->
                <div
                  onclick="showInfo('gateway')"
                  class="diagram-box mt-2 p-1 bg-slate-200 border border-slate-400 rounded text-center"
                >
                  <span class="font-bold text-[10px]">Gateway (RFC)</span>
                </div>
              </div>
            </div>

            <!-- RIGHT COLUMN: JAVA STACK -->
            <div class="flex flex-col">
              <!-- Instance 3: SCS (Java Central Services) -->
              <div class="instance-box java-bg">
                <span class="instance-label"
                  >Instance 02: SCS (Java Central Services)</span
                >
                <div class="grid grid-cols-3 gap-2 mt-2">
                  <div
                    onclick="showInfo('java_ms')"
                    class="diagram-box p-1 svc-bg border border-orange-300 rounded text-center text-[10px] font-bold"
                  >
                    Msg Server
                  </div>
                  <div
                    onclick="showInfo('java_enq')"
                    class="diagram-box p-1 svc-bg border border-orange-300 rounded text-center text-[10px] font-bold"
                  >
                    Enqueue
                  </div>
                  <div
                    onclick="showInfo('sapstartsrv')"
                    class="diagram-box p-1 infra-bg border rounded text-center"
                  >
                    <span class="text-[9px] text-slate-500">sapstartsrv</span>
                  </div>
                </div>
              </div>

              <!-- Instance 4: Java PAS -->
              <div class="instance-box java-bg flex-grow">
                <span class="instance-label">Instance 03: Java PAS</span>

                <!-- Infrastructure -->
                <div class="flex justify-between mb-2 mt-1">
                  <div
                    onclick="showInfo('sapstartsrv')"
                    class="diagram-box px-2 py-1 infra-bg border rounded text-[9px] text-slate-500"
                  >
                    sapstartsrv
                  </div>
                  <div
                    onclick="showInfo('jstart')"
                    class="diagram-box px-2 py-1 infra-bg border rounded text-[9px] text-slate-500"
                  >
                    jstart/jlaunch
                  </div>
                </div>

                <!-- ICM (Added to Java Stack) -->
                <div
                  onclick="showInfo('icm')"
                  class="diagram-box w-full p-1 shared-bg border-2 border-purple-200 rounded text-center shadow-sm mb-2"
                >
                  <span class="font-bold text-purple-900 text-xs">ICM</span>
                </div>

                <div
                  onclick="showInfo('dispatcher_java')"
                  class="diagram-box p-2 bg-white border-2 border-orange-300 rounded text-center shadow-sm mb-4"
                >
                  <span class="font-bold text-xs">Java Dispatcher</span>
                  <div class="grid grid-cols-2 gap-1 mt-1">
                    <div class="sub-box bg-orange-50 text-[8px]">Conn Mgr</div>
                    <div class="sub-box bg-orange-50 text-[8px]">Load Bal</div>
                  </div>
                </div>

                <!-- Java Server Nodes -->
                <div class="flex flex-col gap-2">
                  <div
                    onclick="showInfo('server_node')"
                    class="diagram-box p-2 bg-orange-50 border-2 border-orange-300 rounded"
                  >
                    <div class="flex items-center justify-center gap-2 mb-1">
                      <div
                        class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"
                      ></div>
                      <span class="text-xs font-bold">Server Node 0 (JVM)</span>
                    </div>
                    <div class="grid grid-cols-1 gap-1">
                      <div
                        onclick="showInfo('java_web'); event.stopPropagation();"
                        class="sub-box bg-white"
                      >
                        Web Container
                      </div>
                      <div
                        onclick="showInfo('java_ejb'); event.stopPropagation();"
                        class="sub-box bg-white"
                      >
                        EJB Container
                      </div>
                      <div
                        onclick="showInfo('java_persist'); event.stopPropagation();"
                        class="sub-box bg-white"
                      >
                        Persistence
                      </div>
                    </div>
                  </div>
                  <div
                    onclick="showInfo('server_node')"
                    class="diagram-box p-1 bg-orange-50 border border-orange-300 rounded opacity-75 text-center"
                  >
                    <span class="text-[10px]">Server Node 1 (JVM) ...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Database Layer -->
        <div class="flex justify-center relative">
          <div
            class="absolute -top-6 w-1/2 h-6 border-l-2 border-r-2 border-slate-300"
          ></div>

          <div
            onclick="showInfo('db')"
            class="diagram-box w-2/3 max-w-sm p-3 bg-slate-100 border-2 border-slate-400 rounded-lg shadow-md relative z-10"
          >
            <div class="flex items-center justify-center gap-2 mb-2">
              <svg
                class="w-4 h-4 text-slate-500"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"
                ></path>
              </svg>
              <span class="font-bold text-slate-800 text-sm"
                >DBMS (Database)</span
              >
            </div>

            <div class="grid grid-cols-2 gap-2">
              <!-- Renamed Schemas -->
              <div
                onclick="showInfo('db_schema_abap'); event.stopPropagation();"
                class="sub-box p-2 bg-blue-100 border-blue-200 font-bold"
              >
                ABAP Schema
              </div>
              <div
                onclick="showInfo('db_schema_java'); event.stopPropagation();"
                class="sub-box p-2 bg-orange-100 border-orange-200 font-bold"
              >
                Java Schema
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Info Panel -->
      <div class="lg:w-80 flex-shrink-0">
        <div
          class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden sticky top-14"
        >
          <div class="bg-slate-100 p-3 border-b border-slate-200">
            <h2
              class="font-bold text-sm text-slate-800 uppercase tracking-wide"
            >
              Component Inspector
            </h2>
          </div>
          <div
            id="info-content"
            class="p-4 h-[calc(100vh-150px)] overflow-y-auto"
          >
            <div class="text-center text-slate-400 py-8">
              <p class="text-sm">
                Select a component to view detailed architecture.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="script.js"></script>
  </body>
</html>
 